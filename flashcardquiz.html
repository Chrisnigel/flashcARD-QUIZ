<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcard Quiz App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            min-height: 100vh;
        }
        
        .quiz-container {
            box-shadow: 0 20px 30px -15px rgba(0, 0, 0, 0.15);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .quiz-container:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 35px -15px rgba(0, 0, 0, 0.2);
        }
        
        .category-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -5px rgba(0, 0, 0, 0.1);
        }
        
        .flashcard {
            perspective: 1000px;
            min-height: 300px;
        }
        
        .flashcard-inner {
            transition: transform 0.6s;
            transform-style: preserve-3d;
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }
        
        .flashcard-front, .flashcard-back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .option-btn {
            transition: all 0.2s ease;
        }
        
        .option-btn:hover:not(.selected) {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        
        .selected.correct {
            background-color: #10b981;
            color: white;
        }
        
        .selected.incorrect {
            background-color: #ef4444;
            color: white;
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .celebrate {
            animation: bounce 0.5s ease infinite;
        }
    </style>
</head>
<body class="flex items-center justify-center p-4 py-8">
    <div class="quiz-container w-full max-w-4xl p-6 md:p-8">
        <!-- App Header -->
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-800">
                <i class="fas fa-graduation-cap text-indigo-600 mr-2"></i> Flashcard Quiz
            </h1>
            <div id="high-score" class="text-sm font-medium bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full">
                <i class="fas fa-trophy mr-1"></i> High Score: 0
            </div>
        </div>
        
        <!-- Category Selection Screen -->
        <div id="category-screen">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Choose a category:</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6">
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="general">
                    <div class="text-indigo-600 text-3xl mb-3">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">General Knowledge</h3>
                    <p class="text-gray-500 text-sm">Test your worldly wisdom</p>
                </div>
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="science">
                    <div class="text-blue-600 text-3xl mb-3">
                        <i class="fas fa-flask"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">Science</h3>
                    <p class="text-gray-500 text-sm">Explore the world of science</p>
                </div>
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="history">
                    <div class="text-amber-600 text-3xl mb-3">
                        <i class="fas fa-landmark"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">History</h3>
                    <p class="text-gray-500 text-sm">Journey through time</p>
                </div>
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="programming">
                    <div class="text-emerald-600 text-3xl mb-3">
                        <i class="fas fa-code"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">Programming</h3>
                    <p class="text-gray-500 text-sm">Coding concepts & trivia</p>
                </div>
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="movies">
                    <div class="text-purple-600 text-3xl mb-3">
                        <i class="fas fa-film"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">Movies</h3>
                    <p class="text-gray-500 text-sm">Cinematic knowledge</p>
                </div>
                <div class="category-card bg-white p-6 rounded-xl cursor-pointer" data-category="custom">
                    <div class="text-pink-600 text-3xl mb-3">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-1">Custom Quiz</h3>
                    <p class="text-gray-500 text-sm">Create your own questions</p>
                </div>
            </div>
            
            <div class="bg-blue-50 p-4 rounded-lg mb-6">
                <h3 class="font-semibold text-blue-800 mb-2 flex items-center">
                    <i class="fas fa-info-circle mr-2"></i> How it works
                </h3>
                <ul class="text-sm text-blue-700 list-disc pl-5 space-y-1">
                    <li>Select a category to start the quiz</li>
                    <li>Answer questions and track your score</li>
                    <li>Flip cards to see explanations</li>
                    <li>Your high score is saved automatically</li>
                </ul>
            </div>
        </div>
        
        <!-- Quiz Screen (initially hidden) -->
        <div id="quiz-screen" class="hidden">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <span id="current-category" class="font-medium bg-gray-100 text-gray-800 px-3 py-1 rounded-full"></span>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-sm font-medium">
                        <span id="current-score" class="bg-green-100 text-green-800 px-2 py-1 rounded">Score: 0</span>
                    </div>
                    <div class="text-sm font-medium">
                        <span id="question-count" class="bg-indigo-100 text-indigo-800 px-2 py-1 rounded">1/10</span>
                    </div>
                </div>
            </div>
            
            <div class="relative mb-6">
                <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
                    <div id="progress-bar" class="progress-bar h-full bg-indigo-600 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            
            <!-- Flashcard -->
            <div class="flashcard mb-8" id="flashcard">
                <div class="flashcard-inner">
                    <div class="flashcard-front bg-white p-6 rounded-xl">
                        <div class="text-5xl mb-4 text-indigo-600">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <h3 id="question-text" class="text-xl font-semibold text-center mb-6 text-gray-800"></h3>
                        <div id="options-container" class="w-full grid grid-cols-1 md:grid-cols-2 gap-3"></div>
                    </div>
                    <div class="flashcard-back">
                        <div class="text-5xl mb-4 text-white">
                            <i class="fas fa-lightbulb"></i>
                        </div>
                        <h3 class="text-xl font-semibold text-center mb-2 text-white">Explanation</h3>
                        <p id="explanation-text" class="text-center text-white mb-6"></p>
                        <div class="text-xs text-indigo-200">
                            <i class="fas fa-hand-point-left mr-1"></i> Flip card to return
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-between">
                <button id="flip-btn" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-300 transition">
                    <i class="fas fa-exchange-alt mr-2"></i> Flip Card
                </button>
                <button id="next-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-indigo-700 transition hidden">
                    Next Question <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>
        
        <!-- Results Screen (initially hidden) -->
        <div id="results-screen" class="hidden text-center py-8">
            <div id="celebration-icon" class="text-6xl mb-6 text-indigo-600">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="text-3xl font-bold text-gray-800 mb-2">Quiz Completed!</h2>
            <p id="results-text" class="text-xl text-gray-600 mb-6">You scored <span class="font-bold text-indigo-600">0</span> out of <span class="font-bold">10</span></p>
            <div class="flex justify-center space-x-4">
                <button id="restart-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-indigo-700 transition">
                    <i class="fas fa-redo mr-2"></i> Try Again
                </button>
                <button id="new-quiz-btn" class="bg-white text-indigo-600 border border-indigo-600 px-6 py-2 rounded-lg font-medium hover:bg-indigo-50 transition">
                    <i class="fas fa-list mr-2"></i> New Quiz
                </button>
                <p class="text-gray-500 text-sm">Built with <i class="fas fa-heart text-red-400"></i> using Chart.js and Tailwind CSS</p>

            </div>
        </div>
        
        <!-- Custom Quiz Screen (initially hidden) -->
        <div id="custom-quiz-screen" class="hidden">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">Create Custom Quiz</h2>
            
            <div class="bg-yellow-50 p-4 rounded-lg mb-6">
                <h3 class="font-semibold text-yellow-800 mb-2 flex items-center">
                    <i class="fas fa-lightbulb mr-2"></i> Tips
                </h3>
                <ul class="text-sm text-yellow-700 list-disc pl-5 space-y-1">
                    <li>Add at least 5 questions for a good quiz</li>
                    <li>Mark the correct answer for each question</li>
                    <li>Explanations help you learn from mistakes</li>
                </ul>
            </div>
            
            <div id="custom-questions-container">
                <!-- Questions will be added here dynamically -->
            </div>
            
            <div class="flex justify-between mt-6">
                <button id="add-question-btn" class="bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition">
                    <i class="fas fa-plus mr-2"></i> Add Question
                </button>
                <div>
                    <button id="cancel-custom-btn" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg font-medium hover:bg-gray-300 transition mr-2">
                        Cancel
                    </button>
                    <button id="start-custom-quiz-btn" class="bg-indigo-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-indigo-700 transition">
                        Start Quiz <i class="fas fa-play ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const categoryScreen = document.getElementById('category-screen');
            const quizScreen = document.getElementById('quiz-screen');
            const resultsScreen = document.getElementById('results-screen');
            const customQuizScreen = document.getElementById('custom-quiz-screen');
            const highScoreElement = document.getElementById('high-score');
            const currentScoreElement = document.getElementById('current-score');
            const questionCountElement = document.getElementById('question-count');
            const currentCategoryElement = document.getElementById('current-category');
            const progressBar = document.getElementById('progress-bar');
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const explanationText = document.getElementById('explanation-text');
            const resultsText = document.getElementById('results-text');
            const flipBtn = document.getElementById('flip-btn');
            const nextBtn = document.getElementById('next-btn');
            const restartBtn = document.getElementById('restart-btn');
            const newQuizBtn = document.getElementById('new-quiz-btn');
            const addQuestionBtn = document.getElementById('add-question-btn');
            const cancelCustomBtn = document.getElementById('cancel-custom-btn');
            const startCustomQuizBtn = document.getElementById('start-custom-quiz-btn');
            const customQuestionsContainer = document.getElementById('custom-questions-container');
            const flashcard = document.getElementById('flashcard');
            const celebrationIcon = document.getElementById('celebration-icon');
            
            // Quiz Variables
            let currentCategory = '';
            let questions = [];
            let currentQuestionIndex = 0;
            let score = 0;
            let highScore = localStorage.getItem('flashcardQuizHighScore') || 0;
            let selectedOption = null;
            
            // Update high score display
            highScoreElement.innerHTML = `<i class="fas fa-trophy mr-1"></i> High Score: ${highScore}`;
            
            // Question Banks
            const questionBanks = {
                general: [
                    {
                        question: "What is the capital of France?",
                        options: ["London", "Berlin", "Paris", "Madrid"],
                        correctAnswer: 2,
                        explanation: "Paris has been the capital of France since the 5th century."
                    },
                    {
                        question: "Which planet is known as the Red Planet?",
                        options: ["Venus", "Mars", "Jupiter", "Saturn"],
                        correctAnswer: 1,
                        explanation: "Mars appears reddish due to iron oxide (rust) on its surface."
                    },
                    {
                        question: "Who painted the Mona Lisa?",
                        options: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
                        correctAnswer: 2,
                        explanation: "Leonardo da Vinci painted the Mona Lisa between 1503 and 1506."
                    },
                    {
                        question: "What is the largest ocean on Earth?",
                        options: ["Atlantic Ocean", "Indian Ocean", "Arctic Ocean", "Pacific Ocean"],
                        correctAnswer: 3,
                        explanation: "The Pacific Ocean covers about 30% of the Earth's surface area."
                    },
                    {
                        question: "Which language has the most native speakers?",
                        options: ["English", "Spanish", "Hindi", "Mandarin Chinese"],
                        correctAnswer: 3,
                        explanation: "Mandarin Chinese has about 1.1 billion native speakers."
                    }
                ],
                science: [
                    {
                        question: "What is the chemical symbol for gold?",
                        options: ["Go", "Gd", "Au", "Ag"],
                        correctAnswer: 2,
                        explanation: "Au comes from the Latin word for gold, 'aurum'."
                    },
                    {
                        question: "What is the hardest natural substance on Earth?",
                        options: ["Gold", "Iron", "Diamond", "Quartz"],
                        correctAnswer: 2,
                        explanation: "Diamond scores 10 on the Mohs scale of mineral hardness."
                    },
                    {
                        question: "Which gas do plants absorb from the atmosphere?",
                        options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
                        correctAnswer: 2,
                        explanation: "Plants use CO₂ for photosynthesis to produce oxygen and glucose."
                    },
                    {
                        question: "What is the main component of the Sun?",
                        options: ["Liquid lava", "Hydrogen", "Oxygen", "Carbon"],
                        correctAnswer: 1,
                        explanation: "The Sun is about 70% hydrogen and 28% helium by mass."
                    },
                    {
                        question: "What is the unit of electrical resistance?",
                        options: ["Volt", "Ampere", "Ohm", "Watt"],
                        correctAnswer: 2,
                        explanation: "The ohm (Ω) is named after German physicist Georg Ohm."
                    }
                ],
                history: [
                    {
                        question: "In which year did World War II end?",
                        options: ["1943", "1945", "1947", "1950"],
                        correctAnswer: 1,
                        explanation: "WWII ended on September 2, 1945, with Japan's formal surrender."
                    },
                    {
                        question: "Who was the first president of the United States?",
                        options: ["Thomas Jefferson", "John Adams", "George Washington", "Abraham Lincoln"],
                        correctAnswer: 2,
                        explanation: "George Washington served from 1789 to 1797."
                    },
                    {
                        question: "The ancient Egyptian pyramids were built as:",
                        options: ["Palaces for pharaohs", "Tombs for pharaohs", "Temples for gods", "Astronomical observatories"],
                        correctAnswer: 1,
                        explanation: "Pyramids were monumental tombs for pharaohs and their possessions."
                    },
                    {
                        question: "Which civilization built the Machu Picchu complex?",
                        options: ["Aztec", "Maya", "Inca", "Olmec"],
                        correctAnswer: 2,
                        explanation: "The Incas built Machu Picchu in the 15th century."
                    },
                    {
                        question: "The Renaissance began in which country?",
                        options: ["France", "Germany", "England", "Italy"],
                        correctAnswer: 3,
                        explanation: "The Renaissance began in Italy in the 14th century."
                    }
                ],
                programming: [
                    {
                        question: "What does HTML stand for?",
                        options: [
                            "Hyperlinks and Text Markup Language",
                            "Home Tool Markup Language",
                            "Hyper Text Markup Language",
                            "Hyper Text Making Language"
                        ],
                        correctAnswer: 2,
                        explanation: "HTML is the standard markup language for creating web pages."
                    },
                    {
                        question: "Which language runs in a web browser?",
                        options: ["Java", "C", "Python", "JavaScript"],
                        correctAnswer: 3,
                        explanation: "JavaScript is the programming language of the Web."
                    },
                    {
                        question: "What does CSS stand for?",
                        options: [
                            "Colorful Style Sheets",
                            "Creative Style Sheets",
                            "Cascading Style Sheets",
                            "Computer Style Sheets"
                        ],
                        correctAnswer: 2,
                        explanation: "CSS describes how HTML elements are to be displayed."
                    },
                    {
                        question: "Which of these is not a JavaScript framework?",
                        options: ["React", "Angular", "Vue", "Django"],
                        correctAnswer: 3,
                        explanation: "Django is a Python web framework, not JavaScript."
                    },
                    {
                        question: "What symbol is used for single line comments in JavaScript?",
                        options: ["//", "/*", "#", "--"],
                        correctAnswer: 0,
                        explanation: "// is used for single-line comments in JavaScript."
                    }
                ],
                movies: [
                    {
                        question: "Who directed the movie 'Inception'?",
                        options: ["Steven Spielberg", "Christopher Nolan", "Quentin Tarantino", "Martin Scorsese"],
                        correctAnswer: 1,
                        explanation: "Christopher Nolan directed Inception in 2010."
                    },
                    {
                        question: "Which movie won the first Academy Award for Best Picture?",
                        options: ["Wings", "Gone with the Wind", "Casablanca", "Sunrise"],
                        correctAnswer: 0,
                        explanation: "Wings won the first Oscar for Best Picture in 1929."
                    },
                    {
                        question: "Who played Jack in Titanic?",
                        options: ["Brad Pitt", "Tom Cruise", "Leonardo DiCaprio", "Johnny Depp"],
                        correctAnswer: 2,
                        explanation: "Leonardo DiCaprio played Jack Dawson in Titanic (1997)."
                    },
                    {
                        question: "Which movie features the quote 'May the Force be with you'?",
                        options: ["Star Trek", "Star Wars", "The Matrix", "Guardians of the Galaxy"],
                        correctAnswer: 1,
                        explanation: "This famous quote is from the Star Wars franchise."
                    },
                    {
                        question: "What year was the first Toy Story movie released?",
                        options: ["1990", "1995", "2000", "2005"],
                        correctAnswer: 1,
                        explanation: "Toy Story, the first fully computer-animated feature film, was released in 1995."
                    }
                ]
            };
            
            // Category Selection
            document.querySelectorAll('.category-card').forEach(card => {
                card.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    
                    if (category === 'custom') {
                        showCustomQuizScreen();
                    } else {
                        startQuiz(category);
                    }
                });
            });
            
            // Start Quiz
            function startQuiz(category) {
                currentCategory = category;
                currentQuestionIndex = 0;
                score = 0;
                
                // Set questions based on category
                if (category === 'custom') {
                    // Custom questions will be handled separately
                } else {
                    questions = [...questionBanks[category]];
                    shuffleArray(questions); // Shuffle questions
                    questions = questions.slice(0, 5); // Limit to 5 questions
                }
                
                // Update UI
                currentCategoryElement.textContent = getCategoryName(category);
                currentScoreElement.textContent = `Score: ${score}`;
                questionCountElement.textContent = `1/${questions.length}`;
                progressBar.style.width = '0%';
                
                // Show quiz screen
                categoryScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                resultsScreen.classList.add('hidden');
                customQuizScreen.classList.add('hidden');
                
                // Load first question
                loadQuestion();
            }
            
            // Load Question
            function loadQuestion() {
                const question = questions[currentQuestionIndex];
                questionText.textContent = question.question;
                optionsContainer.innerHTML = '';
                
                // Reset flashcard
                flashcard.classList.remove('flipped');
                
                // Create option buttons
                question.options.forEach((option, index) => {
                    const optionBtn = document.createElement('button');
                    optionBtn.className = 'option-btn bg-white border border-gray-200 p-3 rounded-lg text-left hover:bg-gray-50';
                    optionBtn.textContent = option;
                    optionBtn.setAttribute('data-index', index);
                    optionBtn.addEventListener('click', selectOption);
                    optionsContainer.appendChild(optionBtn);
                });
                
                // Set explanation
                explanationText.textContent = question.explanation;
                
                // Hide next button
                nextBtn.classList.add('hidden');
                
                // Update progress
                const progress = (currentQuestionIndex / questions.length) * 100;
                progressBar.style.width = `${progress}%`;
                
                // Update question count
                questionCountElement.textContent = `${currentQuestionIndex + 1}/${questions.length}`;
            }
            
            // Select Option
            function selectOption(e) {
                if (nextBtn.classList.contains('hidden')) {
                    const selectedIndex = parseInt(e.target.getAttribute('data-index'));
                    const question = questions[currentQuestionIndex];
                    selectedOption = e.target;
                    
                    // Mark selected option
                    e.target.classList.add('selected');
                    
                    // Disable all options
                    document.querySelectorAll('.option-btn').forEach(btn => {
                        btn.disabled = true;
                    });
                    
                    // Check if correct
                    if (selectedIndex === question.correctAnswer) {
                        e.target.classList.add('correct');
                        score++;
                        currentScoreElement.textContent = `Score: ${score}`;
                    } else {
                        e.target.classList.add('incorrect');
                        // Highlight correct answer
                        document.querySelector(`.option-btn[data-index="${question.correctAnswer}"]`).classList.add('correct');
                    }
                    
                    // Show next button
                    nextBtn.classList.remove('hidden');
                }
            }
            
            // Next Question
            nextBtn.addEventListener('click', function() {
                currentQuestionIndex++;
                
                if (currentQuestionIndex < questions.length) {
                    loadQuestion();
                } else {
                    showResults();
                }
            });
            
            // Show Results
            function showResults() {
                // Update high score if needed
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('flashcardQuizHighScore', highScore);
                    highScoreElement.innerHTML = `<i class="fas fa-trophy mr-1"></i> High Score: ${highScore}`;
                    
                    // Celebration animation
                    celebrationIcon.classList.add('celebrate');
                    setTimeout(() => {
                        celebrationIcon.classList.remove('celebrate');
                    }, 2000);
                }
                
                // Update results text
                resultsText.innerHTML = `You scored <span class="font-bold text-indigo-600">${score}</span> out of <span class="font-bold">${questions.length}</span>`;
                
                // Show results screen
                quizScreen.classList.add('hidden');
                resultsScreen.classList.remove('hidden');
            }
            
            // Flip Card
            flipBtn.addEventListener('click', function() {
                flashcard.classList.toggle('flipped');
            });
            
            // Restart Quiz
            restartBtn.addEventListener('click', function() {
                startQuiz(currentCategory);
            });
            
            // New Quiz
            newQuizBtn.addEventListener('click', function() {
                categoryScreen.classList.remove('hidden');
                resultsScreen.classList.add('hidden');
            });
            
            // Custom Quiz Functions
            function showCustomQuizScreen() {
                categoryScreen.classList.add('hidden');
                customQuizScreen.classList.remove('hidden');
                
                // Clear any existing questions
                customQuestionsContainer.innerHTML = '';
                
                // Add first question
                addCustomQuestion();
            }
            
            function addCustomQuestion() {
                const questionIndex = customQuestionsContainer.children.length;
                const questionDiv = document.createElement('div');
                questionDiv.className = 'bg-white p-4 rounded-lg shadow mb-4';
                questionDiv.innerHTML = `
                    <h3 class="font-medium text-gray-700 mb-2">Question ${questionIndex + 1}</h3>
                    <input type="text" placeholder="Enter your question" class="question-input w-full p-2 border border-gray-300 rounded mb-2">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-2 mb-3">
                        <div class="flex items-center">
                            <input type="radio" name="correct-${questionIndex}" value="0" class="mr-2">
                            <input type="text" placeholder="Option 1" class="option-input w-full p-2 border border-gray-300 rounded">
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="correct-${questionIndex}" value="1" class="mr-2">
                            <input type="text" placeholder="Option 2" class="option-input w-full p-2 border border-gray-300 rounded">
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="correct-${questionIndex}" value="2" class="mr-2">
                            <input type="text" placeholder="Option 3" class="option-input w-full p-2 border border-gray-300 rounded">
                        </div>
                        <div class="flex items-center">
                            <input type="radio" name="correct-${questionIndex}" value="3" class="mr-2">
                            <input type="text" placeholder="Option 4" class="option-input w-full p-2 border border-gray-300 rounded">
                        </div>
                    </div>
                    <textarea placeholder="Explanation (optional)" class="explanation-input w-full p-2 border border-gray-300 rounded mb-2"></textarea>
                    ${questionIndex > 0 ? `<button class="remove-question-btn bg-red-500 text-white px-3 py-1 rounded text-sm">Remove Question</button>` : ''}
                `;
                
                // Add remove question event
                if (questionIndex > 0) {
                    const removeBtn = questionDiv.querySelector('.remove-question-btn');
                    removeBtn.addEventListener('click', function() {
                        customQuestionsContainer.removeChild(questionDiv);
                        // Renumber remaining questions
                        const questions = customQuestionsContainer.querySelectorAll('div');
                        questions.forEach((q, idx) => {
                            q.querySelector('h3').textContent = `Question ${idx + 1}`;
                        });
                    });
                }
                
                customQuestionsContainer.appendChild(questionDiv);
            }
            
            // Add Question
            addQuestionBtn.addEventListener('click', addCustomQuestion);
            
            // Cancel Custom Quiz
            cancelCustomBtn.addEventListener('click', function() {
                customQuizScreen.classList.add('hidden');
                categoryScreen.classList.remove('hidden');
            });
            
            // Start Custom Quiz
            startCustomQuizBtn.addEventListener('click', function() {
                // Validate and collect custom questions
                questions = [];
                const questionDivs = customQuestionsContainer.querySelectorAll('div');
                
                if (questionDivs.length < 1) {
                    alert('Please add at least one question');
                    return;
                }
                
                questionDivs.forEach(div => {
                    const questionInput = div.querySelector('.question-input');
                    const optionInputs = div.querySelectorAll('.option-input');
                    const correctRadio = div.querySelector('input[type="radio"]:checked');
                    const explanationInput = div.querySelector('.explanation-input');
                    
                    // Validate
                    if (!questionInput.value.trim()) {
                        alert('Please enter a question');
                        questionInput.focus();
                        return;
                    }
                    
                    const options = [];
                    optionInputs.forEach(input => {
                        if (!input.value.trim()) {
                            alert('Please fill in all options');
                            input.focus();
                            return;
                        }
                        options.push(input.value.trim());
                    });
                    
                    if (!correctRadio) {
                        alert('Please select the correct answer');
                        return;
                    }
                    
                    // Add question
                    questions.push({
                        question: questionInput.value.trim(),
                        options: options,
                        correctAnswer: parseInt(correctRadio.value),
                        explanation: explanationInput.value.trim() || "No explanation provided."
                    });
                });
                
                // Start quiz with custom questions
                currentCategory = 'custom';
                currentQuestionIndex = 0;
                score = 0;
                
                // Update UI
                currentCategoryElement.textContent = "Custom Quiz";
                currentScoreElement.textContent = `Score: ${score}`;
                questionCountElement.textContent = `1/${questions.length}`;
                progressBar.style.width = '0%';
                
                // Show quiz screen
                customQuizScreen.classList.add('hidden');
                quizScreen.classList.remove('hidden');
                
                // Load first question
                loadQuestion();
            });
            
            // Helper Functions
            function getCategoryName(category) {
                const names = {
                    general: "General Knowledge",
                    science: "Science",
                    history: "History",
                    programming: "Programming",
                    movies: "Movies",
                    custom: "Custom Quiz"
                };
                return names[category] || category;
            }
            
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }
        });
    </script>
</body>
</html>